# Rock Paper Scissors Network Protocol
The following strings are the expected commands that either the client and/or
the server is exppecting. They are grouped by which function the client first
uses the call. Each command is a JSON object.

## 1. Register Messages
These are the messages that are used during the registration process.

### Client Messages
These are messages that the client sends to the server.

#### Register Username
To allow the user to pick a personalized username, the client sends the
following message to the server:

```json
{
    "action": "register",
    "username": "[username]"
}
```
Where `[username]` is a name that the user has specified.
### Server Messages
These are the messages that the server sends to the client. The server takes
the username received and checks the current list of registered names then
sends back one of the following messages:

#### Success
If the name is found to be valid to the server, it sends the following succes
message:

```json
{
    "result": "success",
    "clientid": "[id]"
}
````
Where `[id]` is the client unique identifier.

#### Error
If the name is not found to be vailid with the server, it sends back one of the
following messages:

```json
{
    "result": "error",
    "excuse": "[message]"
}
```
Where `[message]` is the description of the error. `"excuse"` is optional.

## 2. Menu Messages
These are the messages for communication between the client and the server
while interacting with the menu.

### Client Messages
The following messages are used by the client to interaction with the server
during the menu phase.

#### List Opponents
To retrieve a list of possible opponents, the client sends the following
message:

```json
{
    "action": "list",
    "clientid": "[username]"
}
```
Where `[username]` is the id the client choose during registration.

#### List Games
To list only the games available to play, the client sends the following
message:

```json
{
    "action": "glist",
    "clientid": "[username]"
}
```
Where `[username]` is the id the client choose during registration.

#### Create Game
This message is sent to tell the server that they are actively looking for an
opponent.

```json
{
    "action": "create",
    "clientid": "[username]"
}
```
Where `[username]` is the id the client choose during registration.

#### Join Game
This message is sent when the user would like to join a specific game.

```json
{
    "action": "join",
    "gameid": "[id]"
}
```
Where `[id]` is the id of the game to be joined.

#### Leave Server
This message is used to gracefully leave the server.

```json
{
    "action": "disconnect",
    "clientid": "[username]"
}
```
Where `[username]` is the username the user chose during registration. Do not
allow this variable to be entered by the user directly.

### Server Messages
The following are the messages the server sends back in response to the client
messages above, respectively.

#### List Opponents
If the server successfully obtains a list of oppenents, it will respond with the
following message.

```json
{
    "result": "success",
    "list": "[list]"
}
```
Where `[list]` is list of possible opponents, generated by the server.

#### List Games
If the server successfully generates a list of only games, it sends back the
following message:

```json
{
    "result": "success",
    "list": "[list]"
}
```
Where `[list]` is list of possible games, generated by the server.

#### Create Game
If the server successfully added a game to the queue for a player, it sends back
the following message:

```json
{
    "result": "success",
    "gameid": "[gameid]"
}
```
Where `[gameid]` is the unique identifier people can directly challenge via and
without asking to challenge you.

#### Join Game
If the server successfully adds you to the game requested, it will send back the
following message:

```json
{
  "result": "success",
  "playerid": "[playerid]"
}
```
Where `[playerid]` is the player position you are (ie, player 1).

#### Leave Server
If the server successfully deletes you from its list, it will send back the
following message directly prior to closing the socket:

```json
{
  "result": "success",
  "message": "[message]"
}
```
Where `[message]` is the final message the server sends to the client.

## Game Handling
The way the server handles games is via an array of 'game' dictionaries. Below is
the json equivalent of the dictionary key pairs.

```json
{
  "gameID": "[idnum]",
  "state": "[empty,open,closed,playing,results]",
  "playerOne": "[username1]",
  "throwOne": "[rock,paper,scissors]",
  "playerTwo": "[username2]",
  "throwTwo": "[rock,paper,scissors]",
  "winner": "[username]"
}
```
`[idnum]` is the game's unique id; the `state` is one of the four listed values
that allows the server to determine what to do with that game; both `[username1]`
and `[username2]` are the client provided usernames of player one and player two
respectively; `throwOne` and `throwTwo` are the throws of player one and player
two respectively; finally `winner` holds the `[username]` of the winning player.

### Throwing
In the game (rock, paper, scissors), the term throw is used to describe the
action each player makes. For example, player one throws rock and player two
throws paper, therefore making player two the winner.

The server will send a request to the client requesting a throw:

```json
{
  "request": "throw"
}
```

The client should then respond with the following:

```json
{
  "action": "throw",
  "type": "[rock,paper,scissors]"
}
```
Where the `"type"` is one of the three listed values.
